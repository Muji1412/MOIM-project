import{a as s,j as t,b as j}from"./inherits_browser.chunk.js";import"./entry.chunk.js";function v(n){const c="=".repeat((4-n.length%4)%4),d=(n+c).replace(/-/g,"+").replace(/_/g,"/"),o=window.atob(d),l=new Uint8Array(o.length);for(let i=0;i<o.length;++i)l[i]=o.charCodeAt(i);return l}function w({userId:n}){const[c,d]=s.useState([]),[o,l]=s.useState(null),[i,P]=s.useState(!1),[r,x]=s.useState("í…ŒìŠ¤íŠ¸ ì œëª©"),[a,y]=s.useState("ì´ê²ƒì€ ë°±ì—”ë“œì—ì„œ ë³´ë‚¸ í‘¸ì‹œ ì•Œë¦¼ì…ë‹ˆë‹¤!"),[p,g]=s.useState(!1),b="BDgnhdO6oZ0uD0vA9YlsOi_1FcMkxUUXOqbBQrscEctZGpvIszTkuQk99LR06fkQvejdwlbYvlDSoaEwvg91bwI",m=async()=>{if(Notification.permission!=="granted"&&await Notification.requestPermission()!=="granted"){alert("ì•Œë¦¼ ê¶Œí•œì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤.");return}try{const u=await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:v(b)});console.log("âœ… í‘¸ì‹œ êµ¬ë… ì„±ê³µ:",JSON.stringify(u)),await fetch("/api/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}),alert("í‘¸ì‹œ ì•Œë¦¼ êµ¬ë…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!"),g(!0)}catch(e){console.error("âŒ í‘¸ì‹œ êµ¬ë… ì‹¤íŒ¨:",e),alert("í‘¸ì‹œ ì•Œë¦¼ êµ¬ë…ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì½˜ì†”ì„ í™•ì¸í•´ì£¼ì„¸ìš”.")}},f=async()=>{if(!r||!a){alert("ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}console.log(`ğŸ“¨ ë°±ì—”ë“œë¡œ í‘¸ì‹œ ì•Œë¦¼ ìš”ì²­: ì œëª©=${r}, ë‚´ìš©=${a}`);try{await fetch("/api/send-all",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:r,body:a})}),alert("ë°±ì—”ë“œë¡œ ì•Œë¦¼ ë°œì†¡ ìš”ì²­ì„ ë³´ëƒˆìŠµë‹ˆë‹¤.")}catch(e){console.error("âŒ ì•Œë¦¼ ë°œì†¡ ìš”ì²­ ì‹¤íŒ¨:",e),alert("ì•Œë¦¼ ë°œì†¡ ìš”ì²­ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì½˜ì†”ì„ í™•ì¸í•´ì£¼ì„¸ìš”.")}};return t.jsxs("div",{style:{display:"flex",gap:"20px"},children:[t.jsx("div",{className:"notification-container",style:{padding:"20px",border:"1px solid #ddd",width:"50%"},children:t.jsxs("h2",{children:["ì›¹ì†Œì¼“ ì•Œë¦¼ ëª©ë¡ (ì‚¬ìš©ì: ",n,")"]})}),t.jsxs("div",{className:"push-test-container",style:{padding:"20px",border:"1px solid #28a745",width:"50%"},children:[t.jsx("h2",{children:"ğŸš€ ì›¹ í‘¸ì‹œ ì•Œë¦¼ í…ŒìŠ¤íŠ¸"}),t.jsx("p",{children:"ë°±ê·¸ë¼ìš´ë“œì—ì„œë„ ë™ì‘í•˜ëŠ” ì•Œë¦¼ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤."}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("button",{onClick:m,disabled:p,children:p?"âœ… í‘¸ì‹œ êµ¬ë… ì™„ë£Œ":"ğŸ”” í‘¸ì‹œ ì•Œë¦¼ êµ¬ë…í•˜ê¸°"}),t.jsx("p",{style:{fontSize:"12px",color:"#666"},children:"ë¸Œë¼ìš°ì €ì— ì•Œë¦¼ì„ ë°›ì„ ìˆ˜ ìˆë„ë¡ ë“±ë¡í•©ë‹ˆë‹¤. (ìµœì´ˆ 1íšŒ)"})]}),t.jsx("hr",{}),t.jsxs("div",{style:{marginTop:"20px"},children:[t.jsx("h3",{children:"ë°±ì—”ë“œì— ì•Œë¦¼ ë°œì†¡ ìš”ì²­í•˜ê¸°"}),t.jsxs("div",{style:{marginBottom:"10px"},children:[t.jsx("label",{htmlFor:"push-title",style:{display:"block"},children:"ì œëª©:"}),t.jsx("input",{id:"push-title",type:"text",value:r,onChange:e=>x(e.target.value),style:{width:"90%",padding:"8px"}})]}),t.jsxs("div",{style:{marginBottom:"10px"},children:[t.jsx("label",{htmlFor:"push-body",style:{display:"block"},children:"ë‚´ìš©:"}),t.jsx("textarea",{id:"push-body",value:a,onChange:e=>y(e.target.value),rows:"3",style:{width:"90%",padding:"8px"}})]}),t.jsx("button",{onClick:f,children:"ğŸ“¤ ë°±ì—”ë“œì— í‘¸ì‹œ ì•Œë¦¼ ìš”ì²­"})]})]})]})}function S(){return t.jsx(w,{userId:"user1234"})}const h=document.getElementById("root");h&&j.createRoot(h).render(t.jsx(S,{}));
