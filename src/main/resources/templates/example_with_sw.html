<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>[[${pageName}]]</title>

    <link rel="icon" th:href="@{/img/favicon.ico}"/>
    <link th:href="@{'/bundle/css/' + ${pageName} + '.css'}" rel="stylesheet" onerror="this.remove()"/>

</head>
<body>
<div id="root"></div>

<script type="module" th:src="@{'/bundle/js/' + ${pageName} + '.bundle.js'}"></script>

<script th:inline="javascript">
    // 페이지가 로드된 후 서비스 워커를 등록합니다.
    window.addEventListener('load', () => {
        // 1. 브라우저가 서비스 워커를 지원하는지 확인
        if ('serviceWorker' in navigator) {
            // 2. 서비스 워커 파일을 등록합니다.
            // 현재 빌드 설정상 sw.js는 /bundle/sw.js 경로에 생성될 가능성이 높습니다.
            navigator.serviceWorker.register('/bundle/sw.js')  // PWA 플러그인이 생성한 sw.js 등록
                .then(registration => {
                    console.log('✅ Service Worker 등록 성공! 범위:', registration.scope);
                })
                .catch(error => {
                    console.error('❌ Service Worker 등록 실패:', error);
                });
        }
    });
</script>
</body>
</html>